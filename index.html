<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <title>寻常巷陌 | 笔记库</title>
    <link rel="icon" href="pictures/icon/notes.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0" />
    <meta name="description" content="Description" />
    <!-- 移动端适配 -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- 引入 Google Sans Code 字体（核心） -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Google+Sans+Code:wght@400;500;600&display=swap"
        rel="stylesheet">

    <!-- docsify 核心样式 -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsify@4/lib/themes/vue.css">
    <!-- 2. 后加载自定义 CSS 文件（核心！） -->
    <!-- <link rel="stylesheet" href="css/scheme-SunsetAncientBuilding.css"> -->
    <link rel="stylesheet" href="css/scheme-UnderCaptialLight.css" title="light">
    <link rel="stylesheet" href="css/scheme-UnderCaptialDark.css" title="dark">
    <link rel="stylesheet" href="css/layout.css">

    <style>
        button {
            border: none;
            color: white;
            padding: 15px 32px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            font-size: 16px;
            margin: 4px 2px;
            cursor: pointer;
        }

        /* 绿色 */
        button1 {
            background-color: #cfff4b;
        }

        /* 蓝色 */
        button2 {
            background-color: #a7d8e9;
        }
    </style>

</head>

<body>
    <!-- 主题切换按钮 -->
    <div class="theme-preview"
        style="position: fixed; top: 10px; right: 20px; z-index: 9999; font-family: var(--font-sans);">
        <a id="theme-toggle" style="padding-right: 10px; cursor: pointer; color: var(--text-color);">切换至暗黑主题</a>
    </div>

    <button class="button button1" id="theme-toggle" onclick="toggleTheme()">切换主题</button>
    <button class="button button2" id="up-top" onclick="upTop()">返回顶部</button>

    <!-- 页面挂载点 -->
    <div id="app">拯救世界中···</div>

    <script>
        window.$docsify = {
            // 基础配置
            name: '寻常巷陌', // 左上角显示的名称
            repo: 'https://github.com/bingugugu/home', // 右上角 GitHub 图标链接
            loadSidebar: true, // 启用侧边栏（需创建 _sidebar.md）
            loadNavbar: true, // 启用顶部导航栏（需创建 _navbar.md）
            auto2top: true, // 切换页面时回到顶部
            homepage: '/README.md', // 首页文件
            coverpage: true, // 启用封面页（需创建 _coverpage.md）
            subMaxLevel: 3, // 侧边栏支持的 Markdown 标题层级
            alias: { // 路径别名（方便整理笔记）
                '/.*/_sidebar.md': '/_sidebar.md' // 所有目录共用侧边栏
            },
            search: {
                maxAge: 86400000, // 过期时间，单位毫秒，默认一天
                paths: 'auto',
                placeholder: '上知天文下晓地理',
                noData: '不识此物',
                depth: 2,
                hideOtherSidebarContent: false, // 是否隐藏其他侧边栏内容
                namespace: 'website-1',
                // pathNamespaces: ['/', '/about']
            },
            plugins: [
                // 标题持久化插件（保留）
                function persistTitle(hook, vm) {
                    var titleElm = document.querySelector('title');
                    var rootTitle = titleElm && titleElm.textContent;
                    var pageTitlePrefix = window.$docsify.name ? window.$docsify.name + ' - ' : '';
                    if (rootTitle) {
                        hook.doneEach(function () {
                            var currentTitle = titleElm.textContent;
                            var isRoot = /^#\/?$/.test(location.hash);
                            var newTitle = isRoot ? rootTitle : pageTitlePrefix + currentTitle;
                            titleElm.textContent = newTitle;
                        });
                    }
                },
                // 主题切换插件（核心：用docsify的hook确保DOM加载完成）
                function themeTogglePlugin(hook, vm) {
                    // docsify初始化完成后执行（关键：避免DOM未加载）
                    hook.ready(function () {
                        // 1. 找到切换容器和所有带title的样式表（只切换自定义主题）
                        var preview = Docsify.dom.find('.theme-preview');
                        var themes = Docsify.dom.findAll('[rel="stylesheet"][title]'); // 只筛选带title的样式表
                        var toggleBtn = Docsify.dom.find('#theme-toggle');

                        // 2. 初始化主题：读取本地存储
                        const initTheme = () => {
                            const savedTheme = localStorage.getItem('docsify-theme') || 'light';
                            themes.forEach(function (theme) {
                                theme.disabled = theme.title !== savedTheme;
                            });
                            // 更新按钮文字
                            toggleBtn.textContent = savedTheme === 'light' ? '切换至暗黑主题' : '切换至亮色主题';
                        };

                        // 3. 点击切换逻辑
                        preview.onclick = function (e) {
                            if (e.target.id !== 'theme-toggle') return; // 只响应切换按钮点击

                            // 获取当前主题
                            let currentTheme = 'light';
                            themes.forEach(function (theme) {
                                if (!theme.disabled) {
                                    currentTheme = theme.title;
                                }
                            });

                            // 切换到相反主题
                            const newTheme = currentTheme === 'light' ? 'dark' : 'light';

                            // 启用目标主题，禁用其他
                            themes.forEach(function (theme) {
                                theme.disabled = theme.title !== newTheme;
                            });

                            // 保存到本地存储
                            localStorage.setItem('docsify-theme', newTheme);

                            // 更新按钮文字和颜色
                            toggleBtn.textContent = newTheme === 'light' ? '切换至暗黑主题' : '切换至亮色主题';
                            toggleBtn.style.color = newTheme === 'dark' ? '#e9a182' : '#db785c';
                        };

                        // 初始化主题
                        initTheme();
                    });
                },
            ]
        }
    </script>

    <!-- Custom JavaScript functions -->
    <script>
        // Toggle between light and dark themes
        function toggleTheme() {
            const themeLinks = document.querySelectorAll('link[rel="stylesheet"]');
            themeLinks.forEach(link => {
                if (link.getAttribute('media') === '(prefers-color-scheme: light)') {
                    link.setAttribute('media', link.getAttribute('media') === 'all' ? '(prefers-color-scheme: light)' : 'all');
                } else if (link.getAttribute('media') === '(prefers-color-scheme: dark)') {
                    link.setAttribute('media', link.getAttribute('media') === 'all' ? '(prefers-color-scheme: dark)' : 'all');
                }
            });
        }

        // Scroll to top of the page
        function upTop() {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        }
    </script>
    <!-- docsify 核心脚本 -->
    <script src="https://cdn.jsdelivr.net/npm/docsify@4/lib/docsify.min.js"></script>

    <!-- docsify-themeable -->
    <script src="https://cdn.jsdelivr.net/npm/docsify-themeable@0/dist/js/docsify-themeable.min.js"></script>

    <script src="//unpkg.com/docsify-count/dist/countable.js"></script>
    <script src="//unpkg.com/docsify-sidebar-collapse@1.3.5/dist/docsify-sidebar-collapse.min.js"></script>

    <script src="//cdn.jsdelivr.net/npm/docsify/lib/plugins/search.min.js"></script>
    <script src="//cdn.jsdelivr.net/npm/docsify/lib/plugins/emoji.min.js"></script>
    <script src="//cdn.jsdelivr.net/npm/docsify-copy-code/dist/docsify-copy-code.min.js"></script>
    <script src="//cdn.jsdelivr.net/npm/docsify-pagination/dist/docsify-pagination.min.js"></script>

    <!-- code highlight -->
    <script src="//unpkg.com/prismjs@1.27.0/components/prism-bash.min.js"></script>
    <script src="//unpkg.com/prismjs@1.27.0/components/prism-csharp.min.js"></script>
    <script src="//unpkg.com/prismjs@1.27.0/components/prism-java.min.js"></script>
    <script src="//unpkg.com/prismjs@1.27.0/components/prism-json.min.js"></script>
    <script src="//unpkg.com/prismjs@1.27.0/components/prism-markdown.min.js"></script>
    <script src="//unpkg.com/prismjs@1.27.0/components/prism-nginx.min.js"></script>
    <script src="//unpkg.com/prismjs@1.27.0/components/prism-properties.min.js"></script>
    <script src="//unpkg.com/prismjs@1.27.0/components/prism-sql.min.js"></script>
    <script src="//unpkg.com/prismjs@1.27.0/components/prism-xml-doc.min.js"></script>
    <script src="//unpkg.com/prismjs@1.27.0/components/prism-yaml.min.js"></script>
    <!-- 代码高亮 -->
    <!-- <script src="https://cdn.jsdelivr.net/npm/prismjs@1/components/prism-bash.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/prismjs@1/components/prism-javascript.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/prismjs@1/components/prism-python.min.js"></script> -->

    <!-- 数学公式支持（按需） -->
    <!-- <script src="https://cdn.jsdelivr.net/npm/docsify-katex@1/dist/docsify-katex.min.js"></script> -->
</body>

</html>