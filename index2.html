<!DOCTYPE html>
<html lang="cn">

<head>
    <meta charset="UTF-8" />
    <title>寻常巷陌</title>
    <link rel="icon" href="/pictures/icon/notes.ico" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0" />
    <meta name="description" content="Description" />
    <!-- Theme: Simple -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsify-themeable@0/dist/css/theme-simple.css">

    <!-- Theme: Simple (light + dark) -->
    <link rel="stylesheet" media="(prefers-color-scheme: light)"
        href="https://cdn.jsdelivr.net/npm/docsify-themeable@0/dist/css/theme-simple.css">
    <link rel="stylesheet" media="(prefers-color-scheme: dark)"
        href="https://cdn.jsdelivr.net/npm/docsify-themeable@0/dist/css/theme-simple-dark.css">

    <!-- Custom theme styles -->
    <link rel="stylesheet" href="/css/custom.css">
    <style type="text/css">
        .sidebar-nav>ul>li.file p>a {
            font-size: 15px;
            font-weight: 700;
            color: #364149;
        }

        .sidebar-nav .folder {
            cursor: pointer;
        }
    </style>

</head>

<body>
    <!-- 自定义按钮 -->
    <div class="custom-buttons" 
        style="position: fixed; top: 10px; right: 20px; z-index: 9999; display: flex; gap: 10px;">
        <button class="button button1" id="theme-toggle" style="padding: 8px 16px; font-size: 14px; background-color: #cfff4b; color: black;">切换主题</button>
        <button class="button button2" id="up-top" style="padding: 8px 16px; font-size: 14px; background-color: #a7d8e9; color: black;">返回顶部</button>
    </div>

    <!-- 加载对话框 -->
    <div id="app"> 拯救世界中··· </div>
    <script>
        window.$docsify = {
            name: '寻常巷陌',
            repo: 'https://github.com/bingugugu/home',
            loadSidebar: true,
            loadNavbar: true,
            subMaxLevel: 2,
            // onlyCover: true,
            auto2top: true,
            // mergeNavbar: true,

            alias: {
                '/.*/_sidebar.md': '/_sidebar.md',
            },
            count: {
                countable: true,
                fontsize: '0.9em',
                color: 'rgb(90,90,90)',
                language: 'chinese'
            },
            // docsify-pagination
            pagination: {
                crossChapter: true,
                crossChapterText: true,
            },
            search: {
                maxAge: 86400000, // 过期时间，单位毫秒，默认一天
                paths: 'auto',
                placeholder: 'search',
                noData: '找不到结果',
                depth: 2,
                hideOtherSidebarContent: false, // 是否隐藏其他侧边栏内容
                namespace: 'website-1',
                pathNamespaces: ['/', '/about']
            },
            coverpage: true,
            plugins: [
                // 自定义按钮插件
                function customButtonsPlugin(hook, vm) {
                    // docsify初始化完成后执行
                    hook.ready(function () {
                        // ------------------------
                        // 1. 主题切换功能
                        // ------------------------
                        const themes = document.querySelectorAll('link[rel="stylesheet"][media^="(prefers-color-scheme"]');
                        const toggleBtn = Docsify.dom.find('#theme-toggle');

                        // 初始化主题：读取本地存储
                        const initTheme = () => {
                            const savedTheme = localStorage.getItem('docsify-theme') || 'light';
                            themes.forEach(function (theme) {
                                if (theme.getAttribute('media').includes('light')) {
                                    theme.setAttribute('media', savedTheme === 'light' ? 'all' : '(prefers-color-scheme: light)');
                                } else if (theme.getAttribute('media').includes('dark')) {
                                    theme.setAttribute('media', savedTheme === 'dark' ? 'all' : '(prefers-color-scheme: dark)');
                                }
                            });
                        };

                        // 点击切换逻辑
                        if (toggleBtn) {
                            toggleBtn.addEventListener('click', function () {
                                // 获取当前主题
                                let currentTheme = 'light';
                                themes.forEach(function (theme) {
                                    if (theme.getAttribute('media') === 'all') {
                                        if (theme.getAttribute('media').includes('light')) {
                                            currentTheme = 'light';
                                        } else if (theme.getAttribute('media').includes('dark')) {
                                            currentTheme = 'dark';
                                        }
                                    }
                                });

                                // 切换到相反主题
                                const newTheme = currentTheme === 'light' ? 'dark' : 'light';

                                // 启用目标主题，禁用其他
                                themes.forEach(function (theme) {
                                    if (theme.getAttribute('media').includes('light')) {
                                        theme.setAttribute('media', newTheme === 'light' ? 'all' : '(prefers-color-scheme: light)');
                                    } else if (theme.getAttribute('media').includes('dark')) {
                                        theme.setAttribute('media', newTheme === 'dark' ? 'all' : '(prefers-color-scheme: dark)');
                                    }
                                });

                                // 保存到本地存储
                                localStorage.setItem('docsify-theme', newTheme);
                            });
                        }

                        // 初始化主题
                        initTheme();

                        // ------------------------
                        // 2. 返回顶部功能
                        // ------------------------
                        const upTopBtn = Docsify.dom.find('#up-top');
                        if (upTopBtn) {
                            upTopBtn.addEventListener('click', function () {
                                window.scrollTo({
                                    top: 0,
                                    behavior: 'smooth'
                                });
                            });
                        }
                    });
                },
            ]
        }
    </script>
    <!-- docsify-themeable -->
    <script src="https://cdn.jsdelivr.net/npm/docsify-themeable@0/dist/js/docsify-themeable.min.js"></script>
    <!-- Docsify v4 -->
    <script src="https://cdn.jsdelivr.net/npm/docsify@4/lib/docsify.min.js"></script>

    <script src="//cdn.jsdelivr.net/npm/docsify/lib/plugins/search.min.js"></script>
    <script src="//cdn.jsdelivr.net/npm/docsify/lib/plugins/emoji.min.js"></script>
    <script src="//cdn.jsdelivr.net/npm/docsify-copy-code/dist/docsify-copy-code.min.js"></script>
    <script src="//unpkg.com/docsify-count/dist/countable.js"></script>
    <script src="//cdn.jsdelivr.net/npm/docsify-pagination/dist/docsify-pagination.min.js"></script>

    <script src="//unpkg.com/docsify-sidebar-collapse@1.3.5/dist/docsify-sidebar-collapse.min.js"></script>

    <!-- code highlight -->
    <script src="//unpkg.com/prismjs@1.27.0/components/prism-bash.min.js"></script>
    <script src="//unpkg.com/prismjs@1.27.0/components/prism-csharp.min.js"></script>
    <script src="//unpkg.com/prismjs@1.27.0/components/prism-java.min.js"></script>
    <script src="//unpkg.com/prismjs@1.27.0/components/prism-json.min.js"></script>
    <script src="//unpkg.com/prismjs@1.27.0/components/prism-markdown.min.js"></script>
    <script src="//unpkg.com/prismjs@1.27.0/components/prism-nginx.min.js"></script>
    <script src="//unpkg.com/prismjs@1.27.0/components/prism-properties.min.js"></script>
    <script src="//unpkg.com/prismjs@1.27.0/components/prism-sql.min.js"></script>
    <script src="//unpkg.com/prismjs@1.27.0/components/prism-xml-doc.min.js"></script>
    <script src="//unpkg.com/prismjs@1.27.0/components/prism-yaml.min.js"></script>

</body>

</html>

